{"version":3,"sources":["Signup.js","Userinfo.js","Wishlist.js","Main.js","App.js","index.js"],"names":["Signup","Userinfo","useState","uid","setUid","uname","setUname","newUN","setNewUN","newPW","setNewPW","phonenum","setPN","newPN","setNewPN","email","setEmail","newEM","setNewEM","wishlist","setWL","auth","useAuth","useEffect","sql","user","user_id","console","log","Axios","get","params","then","response","data","forEach","val","ind","username","phone_num","wishlist_id","className","type","id","defaultValue","onChange","e","target","value","onClick","is_first_attribute","put","updateUser","Wishlist","wishlistitem","setwishlistitem","product_id","map","add_date","priority","Home","Main","exact","path","component","authContext","createContext","ProvideAuth","children","setUser","signin","password","u","length","signout","useProvideAuth","Provider","useContext","PrivateRoute","rest","render","location","to","pathname","state","from","Nav","history","useHistory","push","Login","useLocation","setUN","setPW","name","App","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.e4ed4cb6.chunk.js","sourcesContent":["import react from 'react';\nimport './App.css';\n\nfunction Signup() {\n    return (\n        <div>\n          <h1>Sign up page</h1>\n        </div>\n    );\n}\n\nexport default Signup;\n","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom';\nimport Axios from 'axios';\nimport { useAuth } from \"./App.js\";\n\nfunction Userinfo() {\n    const [uid, setUid] = useState('');\n    const [uname, setUname] = useState('');\n    const [newUN, setNewUN] = useState('');\n    //const [password, setPW] = useState('');\n    const [newPW, setNewPW] = useState('');\n    const [phonenum, setPN] = useState('');\n    const [newPN, setNewPN] = useState('');\n    const [email, setEmail] = useState('');\n    const [newEM, setNewEM] = useState('');\n    const [wishlist, setWL] = useState('');\n    let auth = useAuth();\n\n    useEffect(() => {\n        let sql = \"SELECT * FROM User WHERE user_id=\" + auth.user.user_id;\n        console.log(sql);\n        Axios.get(`http://localhost:3002/api/get`, {\n            params: {\n                sql: sql\n            }\n        }).then((response) => {\n            (response.data).forEach((val,ind) => {\n                setUid(auth.user.user_id);\n                setUname(auth.user.username);\n                //setPW(val.password);\n                setPN(val.phone_num);\n                setEmail(val.email);\n                setWL(val.wishlist_id);\n            })\n        })\n    },[auth.user])\n\n    const updateUser = () => {\n        let is_first_attribute=true;\n        let sql = \"UPDATE User SET \"\n        if(newUN!==\"\"){\n            sql += \"username=\"+newUN;\n            is_first_attribute = false;\n        }\n        if(newPW!==\"\"){\n            if(is_first_attribute) is_first_attribute = false;\n            else sql += \", \";\n            sql += \"password=\"+newPW;\n        }\n        if(newPN!==\"\"){\n            if(is_first_attribute) is_first_attribute = false;\n            else sql += \", \";\n            sql += \"phone_num=\"+newPN;\n        }\n        if(newEM!==\"\"){\n            if(is_first_attribute) is_first_attribute = false;\n            else sql += \", \";\n            sql += \"email=\"+email;\n        }\n        sql += \" WHERE user_id=\"+uid;\n        Axios.put(`http://localhost:3002/api/update`, {\n            sql: sql\n        });\n    }\n\n    return (\n      <div className=\"list\">\n        <p>\n          <b>User ID: {uid} <br />\n             User name: {uname}\n             <input type=\"text\" id=\"newUN\" defaultValue=\"\" onChange={(e) => {\n               setNewUN(e.target.value);\n             }} /></b>  <br />\n             Phone number: {phonenum}\n             <input type=\"text\" id=\"newPN\" defaultValue=\"\" onChange={(e) => {\n               setNewPN(e.target.value);\n             }} /> <br />\n             Email: {email}\n             <input type=\"text\" id=\"newEM\" defaultValue=\"\" onChange={(e) => {\n               setNewEM(e.target.value);\n             }} /> <br />\n             Wishlist: {wishlist} <br />\n             <br />\n             Reset password:\n             <input type=\"password\" id=\"newPW\" defaultValue=\"\" onChange={(e) => {\n               setNewPW(e.target.value);\n             }} />\n        </p>\n        <button onClick={() => {\n            updateUser();\n        }}>Update</button>\n      </div>\n    );\n}\n\nexport default Userinfo;\n","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom';\nimport Axios from 'axios';\nimport { useAuth } from \"./App.js\";\n\nfunction Wishlist(){\n    let auth = useAuth();\n    \n    const [wishlistitem, setwishlistitem] = useState([]);\n    useEffect(() => {\n\n        let sql = \"SELECT * FROM Contains WHERE wishlist_id=\" + auth.user.wishlist_id;\n        console.log(sql);\n        Axios.get(`http://localhost:3002/api/get`, {\n            params: {\n                sql: sql\n            }\n        }).then((response) => {\n            (response.data).forEach((val,ind) => {\n                console.log(\"val is: \" + val.product_id);\n                setwishlistitem(wishlistitem=>[...wishlistitem, val]);\n\n             \n            })\n        })\n    },[auth.user])\n    return (\n        <div className = \"App\">\n        <h1>Main page</h1>\n      \n        <br></br>\n        \n        {wishlistitem.map((val)=>{\n            // console.log(\"in dom element, val \" + val.product_id);\n            // console.log(val);\n            return(\n                <div className = \"card\">\n                      <p> Wishlist Item: {val.product_id} </p>\n                      <p>  add_date:{val.add_date} </p>\n                      <p> priority: {val.priority} </p>\n                </div>\n\n            );\n        }\n\n        )\n\n        }\n        </div>\n    );\n}\n\nexport default Wishlist;","import React, {useState, useEffect} from \"react\";\nimport { Switch, Route } from 'react-router-dom';\nimport Userinfo from './Userinfo.js';\nimport { useAuth } from \"./App.js\";\nimport Wishlist from './Wishlist.js';\n\nimport Axios from 'axios';\n\nconst Main = () => {\n  return (\n    <Switch> {/* The Switch decides which component to show based on the current URL.*/}\n      <Route exact path='/' component={Home}></Route>\n      <Route exact path='/userinfo' component={Userinfo}></Route>\n      <Route exact path='/wishlist' component={Wishlist}></Route>\n    </Switch>\n  );\n}\n\nfunction Home() {\n\n\n\n\n    \n\n\n    return (\n        <div className = \"App\">\n        <h1>Main page</h1>\n      \n        <br></br>\n        \n        \n        </div>\n    );\n}\n\nexport default Main;\n","import React, { useContext, createContext, useState } from 'react';\nimport './App.css';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n  useHistory,\n  useLocation\n} from \"react-router-dom\";\nimport Axios from 'axios';\nimport Signup from './Signup';\nimport Main from './Main';\n\nconst authContext = createContext();\n\nfunction ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n  return (\n    <authContext.Provider value={auth}>\n      {children}\n    </authContext.Provider>\n  );\n}\n\nexport const useAuth = () => {\n  return useContext(authContext);\n}\n\nfunction useProvideAuth() {\n  const [user, setUser] = useState(null);\n\n  const signin = (username, password) => {\n    let u = {}\n    Axios.get(`http://localhost:3002/api/login`, {\n        params: {\n            username: username,\n            password: password\n        }\n    }).then((response) => {\n        if(response.data.length>0){\n            (response.data).forEach((val,ind) => {\n                u.user_id=val.user_id;\n                u.username=val.username;\n                u.wishlist_id=val.wishlist_id\n            });\n            setUser(u);\n            //console.log(Object.keys(user));\n        }\n    });\n    return u;\n  };\n\n  const signout = () => {\n    //return (() => {\n      setUser(null);\n    //});\n  };\n\n  return {\n    user,\n    signin,\n    signout\n  };\n}\n\n// A wrapper for <Route> that redirects to the login\n// screen if you're not yet authenticated.\nfunction PrivateRoute({ children, ...rest }) {\n  let auth = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        auth.user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location }\n            }}\n          />\n        )\n      }\n    />\n  );\n}\n\nfunction App() {\n    let auth = useAuth();\n\n    return (\n      <div className=\"App\">\n        <ProvideAuth>\n          <Router>\n            <Nav />\n            <br />\n            <Switch>\n              <Route path=\"/login\">\n                <Login />\n              </Route>\n              <Route path=\"/signup\" component={Signup} />\n              <PrivateRoute path=\"/\">\n                <Main />\n              </PrivateRoute>\n             </Switch>\n           </Router>\n         </ProvideAuth>\n      </div>\n    );\n}\n\nfunction Nav() {\n    let history = useHistory();\n    let auth = useAuth();\n    \n    //if(auth.user) console.log(Object.keys(auth.user));\n\n    return auth.user ? (\n      <nav>\n        <h3>\n          <Link to=\"/\">Home</Link>\n        </h3>\n        <ul className=\"nav-links\">\n            <li>\n            <Link to=\"/wishlist\">wishlist</Link>\n            </li>\n          <li>\n            <label>Welcome! </label>\n            <Link to=\"/userinfo\">{auth.user.username}</Link>\n          </li>\n          <li>\n            <button onClick={() => {\n                auth.signout(() => history.push(\"/\"));\n            }}>\n              Sign out\n            </button>\n          </li>\n        </ul>\n      </nav>\n    ) : (\n      <nav>\n        <ul className=\"nav-links\">\n          <li>\n            <Link to=\"/login\">log in</Link>\n          </li>\n          <li>\n            <Link to=\"/signup\">Sign up</Link>\n          </li>\n        </ul>\n      </nav>\n    );\n}\n\nfunction Login() {\n    let history = useHistory();\n    let location = useLocation();\n    let auth = useAuth();\n    const [username, setUN] = useState(null);\n    const [password, setPW] = useState(null);\n    //var user = {};\n\n    let { from } = location.state || { from: { pathname: \"/\" } };\n    let login = () => {\n      auth.signin(username, password);\n      /*\n      auth.signin(() => {\n        history.replace(from);\n        Axios.get(`http://localhost:3002/api/login`, {\n            params: {\n                username: username,\n                password: password\n            }\n        }).then((response) => {\n            if(response.data.length>0){\n                (response.data).forEach((val,ind) => {\n                    user['user_id']=val.user_id;\n                    user['username']=val.username;\n                    user['wishlist_id']=val.wishlist_id;\n                })\n                return user;\n            }\n            else return user = {};\n        });\n      });\n      */\n    };\n\n    return (\n      <div>\n        {auth ? (auth.user ? <Redirect to={from} /> : <label />) : <label />}\n        <label>Username: </label>&emsp;\n        <input type=\"text\" name=\"username\" defaultValue=\"\" onChange={(e) => {\n          setUN(e.target.value);\n        }} /> <br />\n        <label>Password: </label>&emsp;\n        <input type=\"password\" name=\"password\" defaultValue=\"\" onChange={(e) => {\n          setPW(e.target.value);\n        }} /> <br />\n        <button onClick={login}>Log in</button>\n      </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n//import './index.css';\nimport App from './App';\n//import reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render((\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n    ),\n\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n//reportWebVitals();\n"],"sourceRoot":""}